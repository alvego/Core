------------------------------------------------------------------------------------------------------------------
-- By by Unknown Coder
------------------------------------------------------------------------------------------------------------------
local _, ns = ... -- namespace
------------------------------------------------------------------------------------------------------------------
local wipe = wipe
------------------------------------------------------------------------------------------------------------------
local pool = {} -- Общий пул для всех таблиц

-- Получить таблицу из пула
function ns.TablePoolAcquire()
    local t = next(pool)
    if t then
        pool[t] = nil
        return t
    end
    return {}
end

-- Вернуть таблицу в пул
function ns.TablePoolRelease(t)
    wipe(t) -- Очищаем таблицу
    pool[t] = true
end

-- Очистить весь пул
function ns.TablePoolClear()
    wipe(pool)
end

-- Получить размер пула (для отладки)
function ns.TablePoolGetSize()
    local count = 0
    for _ in pairs(pool) do count = count + 1 end
    return count
end

------------------------------------------------------------------------------------------------------------------
